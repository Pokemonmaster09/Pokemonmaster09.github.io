<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Brokenomo - Quizzes</title>
  <style>
    :root{
      --dark:#1b4332; --mid:#52b788; --light:#d8f3dc;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial;
      background:linear-gradient(to top right,var(--dark),var(--mid),var(--light));
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px;
      color:#fff;
    }
    .wrap{
      width:100%;
      max-width:420px;
      background:rgba(255,255,255,0.08);
      border-radius:18px;
      padding:18px;
      box-shadow:0 10px 30px rgba(0,0,0,0.25);
      backdrop-filter:blur(8px);
      position:relative;
    }

    /* header with profile icon */
    .top {
      display:flex;
      align-items:center;
      gap:10px;
      margin-bottom:8px;
    }
    .profile {
      width:44px;height:44px;border-radius:50%;overflow:hidden;border:2px solid rgba(255,255,255,0.4);
      background:rgba(255,255,255,0.12); display:flex;align-items:center;justify-content:center;
    }
    .profile img{width:100%;height:100%;object-fit:cover}
    .title {flex:1;text-align:center;font-weight:700;font-size:18px}
    .user {
      font-size:13px;
      opacity:0.95;
      text-align:center;
      margin-bottom:10px;
    }

    .card {
      background:rgba(255,255,255,0.12);
      border-radius:14px;
      padding:18px;
      min-height:160px;
      display:flex;
      flex-direction:column;
      justify-content:center;
      text-align:center;
      margin-bottom:12px;
    }
    .qnum{font-size:13px;opacity:0.9;margin-bottom:8px}
    .question{font-size:18px;font-weight:700;line-height:1.3}
    .options{display:flex;flex-direction:column;gap:10px;margin-top:14px}
    .opt {
      background:rgba(255,255,255,0.08);
      padding:12px 10px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);
      text-align:left;font-weight:600;cursor:pointer;
      transition:transform .12s ease,background .12s ease,box-shadow .12s;
    }
    .opt:hover{transform:translateY(-3px); box-shadow:0 8px 20px rgba(0,0,0,0.2)}
    .opt.correct{background:linear-gradient(90deg,var(--mid),var(--dark)); color:#fff; box-shadow:0 6px 18px rgba(0,0,0,0.28)}
    .opt.wrong{background:rgba(255,80,80,0.15); color:#fff; box-shadow:0 6px 18px rgba(0,0,0,0.28)}
    .opt.disabled{opacity:0.8;cursor:default}

    .controls{display:flex;gap:10px;margin-top:12px}
    .btn{
      flex:1;padding:12px;border-radius:10px;text-align:center;font-weight:700;color:#fff;border:none;cursor:pointer;
      background:linear-gradient(135deg,var(--dark),var(--mid)); box-shadow:0 6px 18px rgba(0,0,0,0.2)
    }
    .btn.secondary{background:rgba(255,255,255,0.12); color:#fff; font-weight:700}
    .btn:active{transform:translateY(1px)}

    /* result */
    .result {
      text-align:center;padding:18px;border-radius:12px;background:rgba(255,255,255,0.06);
      margin-top:12px;
    }
    .scorebig{font-size:34px;font-weight:800}
    .muted{opacity:0.9;font-size:14px;margin-top:6px}

    .bottom-row{display:flex;justify-content:center;margin-top:14px;gap:10px}
    .link{display:inline-block;color:#fff;text-decoration:none;padding:10px 12px;border-radius:10px;background:rgba(255,255,255,0.08)}
  </style>
</head>
<body>
  <div class="wrap" role="main">
    <div class="top">
      <a href="profile.html" class="profile" title="Profile">
        <img src="Images for the ui\user.png" alt="profile">
      </a>
      <div class="title">Quizzes</div>
      <div style="width:44px"></div>
    </div>

    <div class="user" id="userGreeting">Hi —</div>

    <div class="card">
      <div class="qnum" id="qnum">Question 1 / 10</div>
      <div class="question" id="questionText">...</div>

      <div class="options" id="optionsWrap"></div>

      <div class="controls" style="display:none" id="afterSelect">
        <button class="btn secondary" id="prevBtn">← Previous</button>
        <button class="btn" id="nextBtn">Next →</button>
      </div>

      <div class="result" id="resultBox" style="display:none"></div>
    </div>

    <div class="bottom-row">
      <a class="link" href="Main Menu for brokenomo.html">← Back to Main Menu</a>
      <a class="link" id="restartLink" href="#">Retake</a>
    </div>
  </div>

  <script>
    // Load username
    const savedName = localStorage.getItem("brokenomoUser") || "Learner";
    document.getElementById("userGreeting").textContent = `Hi ${savedName}! Try this quick quiz.`;

    // Quiz data (10)
    const quizData = [
      {q:"Which financial statement shows assets, liabilities, and equity?", a:["Income statement","Balance sheet","Cash flow statement","Statement of retained earnings"], correct:1},
      {q:"What is revenue?", a:["Owner's investment","Money earned from sales","Money owed to suppliers","A type of expense"], correct:1},
      {q:"Which is an example of a liability?", a:["Cash","Inventory","Accounts payable","Retained earnings"], correct:2},
      {q:"What does 'budget' help you do?", a:["Increase spending","Plan income and expenses","Avoid saving","Hide taxes"], correct:1},
      {q:"Which method records each transaction twice (debit & credit)?", a:["Single-entry","Double-entry","Cash method","Accrual method"], correct:1},
      {q:"What is an emergency fund?", a:["Money for a vacation","Money saved for unexpected expenses","A monthly bill","A loan"], correct:1},
      {q:"What indicates a healthy cash flow?", a:["More money going out than in","Positive net cash inflows","Never spending","Only investing"], correct:1},
      {q:"Which action increases your equity in a company?", a:["Taking a loan","Owner injecting capital","Paying off expenses","Selling inventory"], correct:1},
      {q:"What should you check before using credit?", a:["Interest rate and fees","Color of the card","Nearby ATMs","Store location"], correct:0},
      {q:"Why track expenses regularly?", a:["So you spend more","To find saving opportunities","To increase debts","To avoid budgeting"], correct:1}
    ];

    let current = 0, score = 0, answered=false;
    const qnumEl = document.getElementById("qnum");
    const questionText = document.getElementById("questionText");
    const optionsWrap = document.getElementById("optionsWrap");
    const nextBtn = document.getElementById("nextBtn");
    const prevBtn = document.getElementById("prevBtn");
    const afterSelect = document.getElementById("afterSelect");
    const resultBox = document.getElementById("resultBox");
    const restartLink = document.getElementById("restartLink");

    function render(){
      const q = quizData[current];
      qnumEl.textContent = `Question ${current+1} / ${quizData.length}`;
      questionText.textContent = q.q;
      optionsWrap.innerHTML = "";
      resultBox.style.display="none";
      afterSelect.style.display="none";
      answered=false;

      q.a.forEach((optText,i)=>{
        const btn = document.createElement("button");
        btn.className="opt";
        btn.innerText = String.fromCharCode(65+i)+". "+optText;
        btn.onclick = ()=> selectOption(btn,i);
        optionsWrap.appendChild(btn);
      });
      // Prev button availability
      prevBtn.disabled = current===0;
      prevBtn.style.opacity = current===0?0.5:1;
    }

    function selectOption(btn, index){
      if(answered) return;
      answered=true;
      // disable all options
      const all = [...optionsWrap.children];
      all.forEach(b=> b.classList.add("disabled"));
      const correctIndex = quizData[current].correct;
      if(index === correctIndex){
        btn.classList.add("correct");
        score++;
        showFeedback(true);
      } else {
        btn.classList.add("wrong");
        // highlight correct
        all.forEach((b,i)=> { if(i===correctIndex) b.classList.add("correct"); });
        showFeedback(false);
      }
      afterSelect.style.display="flex";
      // show result text
    }

    function showFeedback(isCorrect){
      resultBox.style.display="block";
      if(isCorrect){
        resultBox.innerHTML = `<strong>Correct!</strong> Good job.`;
      } else {
        const correctOpt = quizData[current].a[quizData[current].correct];
        resultBox.innerHTML = `<strong>Oops — that's not right.</strong><div class="muted">Correct answer: ${correctOpt}</div>`;
      }
    }

    nextBtn.addEventListener("click", ()=>{
      if(current < quizData.length-1){
        current++;
        render();
      } else {
        showResults();
      }
    });

    prevBtn.addEventListener("click", ()=>{
      if(current>0){ current--; render(); }
    });

    function showResults(){
      optionsWrap.innerHTML = "";
      questionText.textContent = "Quiz Completed";
      qnumEl.textContent = "";
      afterSelect.style.display="none";
      resultBox.style.display="block";
      const percent = Math.round((score/quizData.length)*100);
      resultBox.innerHTML = `<div class="scorebig">${score} / ${quizData.length}</div>
        <div class="muted">${percent}% — ${percent>=70 ? "Nice work!" : "Keep practicing."}</div>
        <div style="margin-top:10px"><button class="btn" id="reviewBtn">Review Answers</button></div>`;
      document.getElementById("reviewBtn").onclick = reviewAnswers;
    }

    function reviewAnswers(){
      current = 0;
      score = 0;
      // Show each question with correct highlighted, disable selection
      optionsWrap.innerHTML = "";
      questionText.textContent = "Review mode — answers shown";
      qnumEl.textContent = `Question ${current+1} / ${quizData.length}`;
      renderReview();
    }

    function renderReview(){
      const q = quizData[current];
      qnumEl.textContent = `Question ${current+1} / ${quizData.length}`;
      questionText.textContent = q.q;
      optionsWrap.innerHTML = "";
      q.a.forEach((opt,i)=>{
        const b = document.createElement("div");
        b.className="opt disabled";
        if(i===q.correct) b.classList.add("correct");
        b.textContent = String.fromCharCode(65+i)+". "+opt;
        optionsWrap.appendChild(b);
      });
      afterSelect.style.display="flex";
      nextBtn.onclick = ()=>{
        if(current < quizData.length-1){ current++; renderReview(); } else {
          // reset nextBtn behavior
          nextBtn.onclick = defaultNext;
          prevBtn.onclick = ()=>{ if(current>0){ current--; renderReview(); } };
          // reset
        }
      };
      prevBtn.onclick = ()=>{
        if(current>0){ current--; renderReview(); }
      };
    }

    function defaultNext(){ if(current < quizData.length-1){ current++; render(); } else showResults(); }

    // retake
    restartLink.addEventListener("click", (e)=>{ e.preventDefault(); current=0; score=0; render(); });

    // initial
    render();
    // set default next behavior
    nextBtn.onclick = defaultNext;
  </script>
</body>
</html>
